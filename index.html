<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Page</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #000;
            color: #fff;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        input {
            padding: 10px;
            font-size: 16px;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <h1>Secure Page</h1>
    <p>Please enter the password to access the page:</p>
    <input type="password" id="password" placeholder="Enter your password">
    <button onclick="decryptAndRedirect()">Submit</button>

    <script>
        // 加密的資料
        const encryptedData = "HRI/L86jRO+NAHNWcHicEapg68Z1"; // 加密後的目標網址
        const iv = Uint8Array.from(atob("ya/4+LAW993s+i0f"), c => c.charCodeAt(0)); // IV
        const authTag = Uint8Array.from(atob("zcNBGd+KzkXuwCxF4/ScSg=="), c => c.charCodeAt(0)); // Auth Tag

        async function decryptAndRedirect() {
            const password = document.getElementById("password").value;

            try {
                // 將密碼轉換為密鑰
                const keyMaterial = await crypto.subtle.importKey(
                    "raw",
                    new TextEncoder().encode(password),
                    "PBKDF2",
                    false,
                    ["deriveKey"]
                );

                const key = await crypto.subtle.deriveKey(
                    {
                        name: "PBKDF2",
                        salt: iv,
                        iterations: 100000,
                        hash: "SHA-256"
                    },
                    keyMaterial,
                    { name: "AES-GCM", length: 256 },
                    false,
                    ["decrypt"]
                );

                // 解密資料
                const decrypted = await crypto.subtle.decrypt(
                    {
                        name: "AES-GCM",
                        iv: iv,
                        additionalData: authTag
                    },
                    key,
                    Uint8Array.from(atob(encryptedData), c => c.charCodeAt(0))
                );

                // 跳轉到解密後的網址
                const url = new TextDecoder().decode(decrypted);
                window.location.href = url;
            } catch (error) {
                alert("Invalid password! Please try again.");
            }
        }
    </script>
</body>
</html>
